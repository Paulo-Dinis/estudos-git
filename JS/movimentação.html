<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movimento</title>
    <style>
        div {
            width: 100px;
            height: 100px;
            border: 1px solid black;
            background-color: #f00;
            position: absolute;
            left: 0px; 
            top: 0px;
        }
    </style>

    
    <script>
        var dx
        var dy
        var px
        var py
        var vel
        var obj
        var tmp
        

        function inicia(){
            dx=0
            dy=0
            px=0
            py=0
            cIn=0
            vel=10
            obj=document.getElementById('dv1')
            document.addEventListener('keydown', tecladw)
            //document.addEventListener('keyup', teclaup)
            tmp=setInterval(enterframe,50)
        }

        function tecladw(){
            debugger;
            let tecla=event.keyCode
            // if (tecla==37){
            //     clearInterval(tmp)
            //     tmp=setInterval(enterframe(1,0),50)
            // }else if(tecla==38){
            //     clearInterval(tmp)
            //     tmp=setInterval(enterframe(0),50)
            if(tecla==39){
                debugger;
                clearInterval(tmp)
                while(tmp){
                    tmp = setInterval(enterframe(1,0),50)
                }
            }
            // }else if(tecla==40){
            //     clearInterval(tmp)
            //     tmp=setInterval(enterframe(1),50)
            // }
        }

        function enterframe(dx, dy){
            if(dx > 0){
                px+=dx*vel
                obj.style.left=px+'px'
            }else{
                py+=dy*vel
                obj.style.top=py+'px'
            }
        }

        window.addEventListener('load', inicia)

    </script>
</head>
<body >
    <div id="dv1"></div>

</body>
</html>